---
title       : PRECIOUS METALS PRICE FORECAST
subtitle    : ARIMA time series forecast
author      : Enrique Pérez Herrero
job         : Mining Engineer
license     : by-nc-sa
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : tomorrow      # 
widgets     : []            # {mathjax, quiz, bootstrap}
mode        : selfcontained # {standalone, draft}
knit        : slidify::knit2slides
---

<style>
.title-slide {
  background-color: #C8FE2E;
}
</style>


--- .class #id &twocol

## Metals Plot

*** =left

hello

*** =right

```{r, echo=FALSE, message=FALSE, results="hide"}
library(quantmod)
library(ggplot2)
library(forecast)
library(scales)

# Parameters

forecast.days <- 365
max.range <- (5 * 365 - 13)

# https://en.wikipedia.org/wiki/Precious_metal

getPreciousMetals <- function(metals, currencies){
    metal_data <- list()
    for(metal in metals){
        for(currency in currencies){
            num <- paste(metal, currency, sep = '.')
            print(num)
            metal_data[[num]] <- as.data.frame(
                getMetals(metal,
                          from = Sys.Date() - max.range,
                          to = Sys.Date(),
                          base.currency = currency,
                          auto.assign = FALSE
                )
            )
        }
    }
    # Convert metal_data to df and improve formatting.
    metal_data <- as.data.frame(metal_data)
    metal_data <- cbind(date = as.Date(rownames(metal_data)), metal_data)
    rownames(metal_data) <- c(1: nrow(metal_data))
    return(metal_data)
}


precious_metals <- c('Gold' = 'XAU',
                     'Silver' = 'XAG',
                     'Palladium' = 'XPD',
                     'Platinum' = 'XPT')

currency_list <- c('US Dollar' = 'USD',
                   'Euro' = 'EUR',
                   'Pound Sterling' = 'GBP')

metals.df <- getPreciousMetals(precious_metals, currency_list)
```


```{r, echo=FALSE}
ggplot() +
 geom_line(data = metals.df, aes(x = date, y = XAU.USD, colour='XAU.USD')) +
 geom_line(data = metals.df, aes(x = date, y = XPD.USD, colour='XPD.USD')) +
 geom_line(data = metals.df, aes(x = date, y = XPT.USD, colour='XPT.USD')) + 
 geom_line(data = metals.df, aes(x = date, y = XAG.USD, colour='XAG.USD')) +
 theme(legend.title = element_blank()) + xlab('') + ylab('USD')
```


--- .class #id &twocol

## App Tab Panels

*** =left
### - Prices Plot  
Shows a price plot for the selected metal and currency, and a control to change adjusted statistics: linear or loess 
### - Prices Table  
Shows the price table data for the selected metal and several currencies
### - Forecast Plot  
Shows the [ARIMA](https://en.wikipedia.org/wiki/Autoregressive_integrated_moving_average) forecast for the next 365 days as a blue line, 80% confidence interval is displayed in orange, while 90% is in yellow.

*** =right
### - Forecast Table  
Displays forecasted data table
### - Arima model  
Shows adjusted model using `auto.arima` from the `forecast` package
### - Differences Plot  
Plots first differences for the selected metal price or the differences of the data base 10 logarithm
### - Residuals Plot  
Plots the ACF and the [PACF](https://en.wikipedia.org/wiki/Partial_autocorrelation_function)


--- .class #id &twocol
## Links


*** =left

* Autoplot: Graphical Methods with ggplot2   http://librestats.com/2012/06/11/autoplot-graphical-methods-with-ggplot2/

* MORE BLACKBOX ANALYSIS - ARIMA MODELING IN R  
http://businessforecastblog.com/more-blackbox-analysis-arima-modeling-in-r/

*** =right

* Step-by-Step Graphic Guide to Forecasting through ARIMA Modeling in R - Manufacturing Case Study Example (Part 4)  
http://ucanalytics.com/blogs/step-by-step-graphic-guide-to-forecasting-through-arima-modeling-in-r-manufacturing-case-study-example/

* Automatic Time Series Forecasting: The forecast Package for R  
Journal of Statistical Software July 2008, Volume 27, Issue 3.  
http://www.jstatsoft.org/article/view/v027i03

* Forecasting: principles and practice  
https://www.otexts.org/fpp





